const express = require('express'); const bodyParser = require('body-parser'); require('dotenv').config(); const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY||'sk_test_xxx'); const app = express(); app.use(bodyParser.json()); app.post('/create-checkout-session', async (req,res)=>{ res.json({url:'https://checkout.stripe.com/pay/sample'}); }); app.post('/webhook',(req,res)=>{ console.log('stripe webhook',req.body); res.send('ok'); }); const PORT=process.env.PORT||4242; app.listen(PORT,()=>console.log('Stripe demo running',PORT));